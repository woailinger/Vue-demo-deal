var Util={tpl:function(t){return document.getElementById(t).innerHTML},ajax:function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var t=JSON.parse(n.responseText);e&&e(t)}},n.open("GET",t,!0),n.send(null)}};Vue.filter("date",function(t){return new Date(t).toLocaleString().replace(/^\d{4}\//,"").replace(/\//," 月 ").replace(/\s[\u4E00-\u9FA5]{2}/," 日 ").replace(/\:\d+$/,"")});var ListComponent=Vue.extend({template:Util.tpl("tpl_list"),data:function(){return{list:[]}},created:function(){var t=this;Util.ajax("data/tsconfig.json",function(e){e&&0===e.errno&&(t.list=e.rss.channel.item)}),window.addEventListener("scroll",function(){var e=document.body.scrollHeight-document.documentElement.clientHeight-window.scrollY-200<0;if(e){var n=document.getElementById("loadingmore");n.style.display="block",Util.ajax("data/tsconfig.json",function(e){if(e&&0===e.errno){n.style.display="none",e.rss.channel.item.sort(function(){return Math.random()>.5?1:-1});var a=t.list.concat(e.rss.channel.item);t.list=a}})}})}});Vue.component("list",ListComponent);var app=new Vue({el:"#app",data:{view:"list"},methods:{}});